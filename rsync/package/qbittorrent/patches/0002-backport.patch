From b0398dbb4c3954f22a6b0e26e232066398583637 Mon Sep 17 00:00:00 2001
From: Chocobo1 <Chocobo1@users.noreply.github.com>
Date: Sun, 29 Aug 2021 11:29:01 +0800
Subject: [PATCH 1/3] Remove unnecessary UI properties in "Add new torrent"
 dialog (#15387)

Closes #15383.
---
 src/gui/addnewtorrentdialog.ui | 11 -----------
 1 file changed, 11 deletions(-)

diff --git a/src/gui/addnewtorrentdialog.ui b/src/gui/addnewtorrentdialog.ui
index 7c2a20e6c45..4134a59773e 100644
--- a/src/gui/addnewtorrentdialog.ui
+++ b/src/gui/addnewtorrentdialog.ui
@@ -281,9 +281,6 @@
           </item>
           <item row="3" column="1">
            <widget class="QScrollArea" name="scrollArea">
-            <property name="styleSheet">
-             <string notr="true">background-color: rgba(0, 0, 0, 0);</string>
-            </property>
             <property name="frameShape">
              <enum>QFrame::NoFrame</enum>
             </property>
@@ -291,14 +288,6 @@
              <bool>true</bool>
             </property>
             <widget class="QWidget" name="scrollAreaWidgetContents">
-             <property name="geometry">
-              <rect>
-               <x>0</x>
-               <y>0</y>
-               <width>333</width>
-               <height>69</height>
-              </rect>
-             </property>
              <layout class="QVBoxLayout" name="verticalLayout_2">
               <property name="leftMargin">
                <number>0</number>

From a0437c7e82a36bbfa3c653e3896c91f71aa8b0f3 Mon Sep 17 00:00:00 2001
From: JungHee Lee <36289819+MarongHappy@users.noreply.github.com>
Date: Sun, 29 Aug 2021 12:27:09 +0900
Subject: [PATCH 2/3] Update Korean NSIS translation (#15380)

---
 .../windows/installer-translations/korean.nsi | 54 +++++++++----------
 1 file changed, 27 insertions(+), 27 deletions(-)

diff --git a/dist/windows/installer-translations/korean.nsi b/dist/windows/installer-translations/korean.nsi
index 8977179620b..58441ef4574 100644
--- a/dist/windows/installer-translations/korean.nsi
+++ b/dist/windows/installer-translations/korean.nsi
@@ -1,60 +1,60 @@
 ;Installer strings
 
 ;LangString inst_qbt_req ${LANG_ENGLISH} "qBittorrent (required)"
-LangString inst_qbt_req ${LANG_KOREAN} "qBittorrent (required)"
+LangString inst_qbt_req ${LANG_KOREAN} "qBittorrent (필요함)"
 ;LangString inst_dekstop ${LANG_ENGLISH} "Create Desktop Shortcut"
-LangString inst_dekstop ${LANG_KOREAN} "Create Desktop Shortcut"
+LangString inst_dekstop ${LANG_KOREAN} "바탕화면 바로가기 만들기"
 ;LangString inst_startmenu ${LANG_ENGLISH} "Create Start Menu Shortcut"
-LangString inst_startmenu ${LANG_KOREAN} "Create Start Menu Shortcut"
+LangString inst_startmenu ${LANG_KOREAN} "시작 메뉴 바로가기 만들기"
 ;LangString inst_startup ${LANG_ENGLISH} "Start qBittorrent on Windows start up"
-LangString inst_startup ${LANG_KOREAN} "Start qBittorrent on Windows start up"
+LangString inst_startup ${LANG_KOREAN} "Windows 시작 시 qBittorrent 시작"
 ;LangString inst_torrent ${LANG_ENGLISH} "Open .torrent files with qBittorrent"
-LangString inst_torrent ${LANG_KOREAN} "Open .torrent files with qBittorrent"
+LangString inst_torrent ${LANG_KOREAN} "qBittorrent로 .torrent 파일 열기"
 ;LangString inst_magnet ${LANG_ENGLISH} "Open magnet links with qBittorrent"
-LangString inst_magnet ${LANG_KOREAN} "Open magnet links with qBittorrent"
+LangString inst_magnet ${LANG_KOREAN} "qBittorrent로 자석 링크 열기"
 ;LangString inst_firewall ${LANG_ENGLISH} "Add Windows Firewall rule"
-LangString inst_firewall ${LANG_KOREAN} "Add Windows Firewall rule"
+LangString inst_firewall ${LANG_KOREAN} "Windows 방화벽 규칙 추가"
 ;LangString inst_pathlimit ${LANG_ENGLISH} "Disable Windows path length limit (260 character MAX_PATH limitation, requires Windows 10 1607 or later)"
-LangString inst_pathlimit ${LANG_KOREAN} "Disable Windows path length limit (260 character MAX_PATH limitation, requires Windows 10 1607 or later)"
+LangString inst_pathlimit ${LANG_KOREAN} "Windows 경로 길이 제한 비활성화(260자 MAX_PATH 제한, Windows 10 1607 이상 필요)"
 ;LangString inst_firewallinfo ${LANG_ENGLISH} "Adding Windows Firewall rule"
-LangString inst_firewallinfo ${LANG_KOREAN} "Adding Windows Firewall rule"
+LangString inst_firewallinfo ${LANG_KOREAN} "Windows 방화벽 규칙 추가하는 중"
 ;LangString inst_warning ${LANG_ENGLISH} "qBittorrent is running. Please close the application before installing."
-LangString inst_warning ${LANG_KOREAN} "qBittorrent is running. Please close the application before installing."
+LangString inst_warning ${LANG_KOREAN} "qBittorrent가 실행 중입니다. 설치하기 전에 응용 프로그램을 닫으십시오."
 ;LangString inst_uninstall_question ${LANG_ENGLISH} "Current version will be uninstalled. User settings and torrents will remain intact."
-LangString inst_uninstall_question ${LANG_KOREAN} "Current version will be uninstalled. User settings and torrents will remain intact."
+LangString inst_uninstall_question ${LANG_KOREAN} "현재 버전이 삭제됩니다. 사용자 설정과 토렌트는 그대로 유지됩니다."
 ;LangString inst_unist ${LANG_ENGLISH} "Uninstalling previous version."
-LangString inst_unist ${LANG_KOREAN} "Uninstalling previous version."
+LangString inst_unist ${LANG_KOREAN} "이전 버전을 삭제하는 중입니다."
 ;LangString launch_qbt ${LANG_ENGLISH} "Launch qBittorrent."
-LangString launch_qbt ${LANG_KOREAN} "Launch qBittorrent."
+LangString launch_qbt ${LANG_KOREAN} "qBittorrent를 실행합니다."
 ;LangString inst_requires_64bit ${LANG_ENGLISH} "This installer works only in 64-bit Windows versions."
-LangString inst_requires_64bit ${LANG_KOREAN} "This installer works only in 64-bit Windows versions."
+LangString inst_requires_64bit ${LANG_KOREAN} "이 설치 프로그램은 64비트 윈도우즈 버전에서만 작동합니다."
 ;LangString inst_requires_win7 ${LANG_ENGLISH} "This qBittorrent version requires at least Windows 7."
-LangString inst_requires_win7 ${LANG_KOREAN} "This qBittorrent version requires at least Windows 7."
+LangString inst_requires_win7 ${LANG_KOREAN} "이 qBittorrent 버전에는 Windows 7 이상이 필요합니다."
 ;LangString inst_uninstall_link_description ${LANG_ENGLISH} "Uninstall qBittorrent"
-LangString inst_uninstall_link_description ${LANG_KOREAN} "Uninstall qBittorrent"
+LangString inst_uninstall_link_description ${LANG_KOREAN} "qBittorrent 삭제"
 
 ;------------------------------------
 ;Uninstaller strings
 
 ;LangString remove_files ${LANG_ENGLISH} "Remove files"
-LangString remove_files ${LANG_KOREAN} "Remove files"
+LangString remove_files ${LANG_KOREAN} "파일 제거"
 ;LangString remove_shortcuts ${LANG_ENGLISH} "Remove shortcuts"
-LangString remove_shortcuts ${LANG_KOREAN} "Remove shortcuts"
+LangString remove_shortcuts ${LANG_KOREAN} "바로가기 제거"
 ;LangString remove_associations ${LANG_ENGLISH} "Remove file associations"
-LangString remove_associations ${LANG_KOREAN} "Remove file associations"
+LangString remove_associations ${LANG_KOREAN} "파일 연결 제거"
 ;LangString remove_registry ${LANG_ENGLISH} "Remove registry keys"
-LangString remove_registry ${LANG_KOREAN} "Remove registry keys"
+LangString remove_registry ${LANG_KOREAN} "레지스트리 키 제거"
 ;LangString remove_conf ${LANG_ENGLISH} "Remove configuration files"
-LangString remove_conf ${LANG_KOREAN} "Remove configuration files"
+LangString remove_conf ${LANG_KOREAN} "구성 파일 제거"
 ;LangString remove_firewall ${LANG_ENGLISH} "Remove Windows Firewall rule"
-LangString remove_firewall ${LANG_KOREAN} "Remove Windows Firewall rule"
+LangString remove_firewall ${LANG_KOREAN} "Windows 방화벽 규칙 제거"
 ;LangString remove_firewallinfo ${LANG_ENGLISH} "Removing Windows Firewall rule"
-LangString remove_firewallinfo ${LANG_KOREAN} "Removing Windows Firewall rule"
+LangString remove_firewallinfo ${LANG_KOREAN} "Windows 방화벽 규칙 제거하는 중"
 ;LangString remove_cache ${LANG_ENGLISH} "Remove torrents and cached data"
-LangString remove_cache ${LANG_KOREAN} "Remove torrents and cached data"
+LangString remove_cache ${LANG_KOREAN} "토렌트 및 캐시된 데이터 제거"
 ;LangString uninst_warning ${LANG_ENGLISH} "qBittorrent is running. Please close the application before uninstalling."
-LangString uninst_warning ${LANG_KOREAN} "qBittorrent is running. Please close the application before uninstalling."
+LangString uninst_warning ${LANG_KOREAN} "qBittorrent가 실행 중입니다. 삭제하기 전에 응용 프로그램을 닫으십시오."
 ;LangString uninst_tor_warn ${LANG_ENGLISH} "Not removing .torrent association. It is associated with:"
-LangString uninst_tor_warn ${LANG_KOREAN} "Not removing .torrent association. It is associated with:"
+LangString uninst_tor_warn ${LANG_KOREAN} ".torrent 연결을 제거하지 않습니다. 관련 항목:"
 ;LangString uninst_mag_warn ${LANG_ENGLISH} "Not removing magnet association. It is associated with:"
-LangString uninst_mag_warn ${LANG_KOREAN} "Not removing magnet association. It is associated with:"
+LangString uninst_mag_warn ${LANG_KOREAN} "자석 연결을 제거하지 않습니다. 관련 항목:"

From 817afb038d3dbe9239293e608a139505e30fd056 Mon Sep 17 00:00:00 2001
From: xavier2k6 <42386382+xavier2k6@users.noreply.github.com>
Date: Mon, 30 Aug 2021 06:07:15 +0100
Subject: [PATCH 3/3] Remove Windows Vista support from manifest

PR #15394.
---
 src/qbittorrent.exe.manifest | 2 --
 1 file changed, 2 deletions(-)

diff --git a/src/qbittorrent.exe.manifest b/src/qbittorrent.exe.manifest
index 23223416b42..86a685fe076 100644
--- a/src/qbittorrent.exe.manifest
+++ b/src/qbittorrent.exe.manifest
@@ -24,8 +24,6 @@
   <!-- Declare support for various versions of Windows -->
   <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
       <application>
-          <!-- Windows Vista -->
-          <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}" />
           <!-- Windows 7 -->
           <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}" />
           <!-- Windows 8 -->
From 5fe2aa775b0aa8881c56b4e52b502fe8c7ea149f Mon Sep 17 00:00:00 2001
From: Chocobo1 <Chocobo1@users.noreply.github.com>
Date: Sun, 29 Aug 2021 11:51:04 +0800
Subject: [PATCH] Fix WebUI crash when tracker URL is invalid

Closes #15391.
---
 src/webui/www/private/scripts/client.js | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/webui/www/private/scripts/client.js b/src/webui/www/private/scripts/client.js
index 2ef2f657d75..a5216b6e228 100644
--- a/src/webui/www/private/scripts/client.js
+++ b/src/webui/www/private/scripts/client.js
@@ -97,7 +97,12 @@ function genHash(string) {
 }
 
 function getTrackerHost(url) {
-    return new URL(url).hostname;
+    try {
+        return new URL(url).hostname;
+    }
+    catch (error) {
+        return url;
+    }
 }
 
 function getSyncMainDataInterval() {
