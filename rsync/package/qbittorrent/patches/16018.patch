From 506d9794017c655c6eef88be97e19c84cd07cb7e Mon Sep 17 00:00:00 2001
From: "Vladimir Golovnev (Glassez)" <glassez@yandex.ru>
Date: Mon, 10 Jan 2022 08:30:05 +0300
Subject: [PATCH] Keep "torrent info" alive while generate .torrent file

---
 src/base/bittorrent/torrentinfo.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/base/bittorrent/torrentinfo.cpp b/src/base/bittorrent/torrentinfo.cpp
index 3f6050e7aa..2b5ff8f09e 100644
--- a/src/base/bittorrent/torrentinfo.cpp
+++ b/src/base/bittorrent/torrentinfo.cpp
@@ -140,7 +140,7 @@ nonstd::expected<void, QString> TorrentInfo::saveToFile(const QString &path) con
 
     try
     {
-        const auto torrentCreator = lt::create_torrent(*nativeInfo());
+        const auto torrentCreator = lt::create_torrent(*m_nativeInfo);
         const lt::entry torrentEntry = torrentCreator.generate();
         const nonstd::expected<void, QString> result = Utils::IO::saveToFile(path, torrentEntry);
         if (!result)
